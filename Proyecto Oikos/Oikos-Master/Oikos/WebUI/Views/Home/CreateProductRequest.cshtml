@using WebUI.Models.Helpers
@using EntitiesPOJO

<script src="~/Scripts/Views/vProductRequest.js"></script>
<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script src="~/Scripts/Views/cloudinaryProductRequest.js"></script>
<script src="~/Scripts/Views/mapProductRequest.js"></script>

@{
    ViewBag.Title = "CreateProductRequest";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<label id="whoAmI" class="d-none">create</label>

@{
    Html.RenderPartial("_MenuClient");
}


<div id="wrapper" class="container wrapper">

    <div class="row">
        <div class="col-12 my-account-area ptb-30">
            <h2>Crear nueva solicitud de producto</h2>
            <div class="tab-content myaccount-tab-content" id="account-page-tab-content">
                <div class="">

                    <form class="ho-form" action="#" id="frmProductRequest">

                        <div class="ho-form-inner">

                            <div id="divProductRequestImage" class="col-md-2 col-sm-12">
                                <img id="imgProductRequest" src="" alt="Logo">
                            </div>
                            <div class="col-md-10 col-sm-12">
                                <button id="btnCloudinary" type="button" class="mt-3 ho-button ho-button-dark" onclick="showUploadWidget(false)">
                                    <span>
                                        Agregar imagen de producto
                                    </span>
                                </button>
                            </div>

                            @Html.CtrlTextArea(divSize: "single-input single-input-half", id: "txtDescription", type: "type=\"text\"", format: "text", label: "Descripción del Producto", placeHolder: "Ingrese la descripción del producto", columnDataName: "Description")


                            @Html.CtrlInput(divSize: "single-input single-input-half", id: "txtDateTime", type: "type=\"date\"", format: "date", label: "Fecha de expiración de la solicitud", placeHolder: "", columnDataName: "ExpirationDateTime")


                            @Html.CtrlDropDown2(id: "drpCategory", label: "Categoría", listId: "category", style: "single-input single-input-half", columnDataName: "CategoryId")


                            @Html.CtrlInput(divSize: "single-input single-input-half", id: "txtQuantity", type: "type=\"number\"", format: "number", label: "Cantidad de producto(s)", placeHolder: "", columnDataName: "Quantity")

                            @Html.CtrlDropDown(id: "drpUserLocation", label: "Dirección de entrega", listId: "USER_LOCATIONS", divSize: "single-input single-input-half", entityType: EntityTypes.UserLocation, columnDataName: "UserLocations")

                            @* Hidden *@
                            @Html.CtrlInput(divSize: "d-none", id: "txtProductRequestId", type: "type=\"number\"", format: "", label: "Id de Solicitud de Producto", placeHolder: "", columnDataName: "ProductRequestId")

                            @Html.CtrlInput(divSize: "d-none", id: "txtUserId", type: "type=\"number\"", format: "", label: "User ID", placeHolder: "", columnDataName: "UserId")

                            @Html.CtrlInput(divSize: "d-none", id: "txtRequestDateTime", type: "type=\"date\"", format: "", label: "Fecha de solicitud", placeHolder: "", columnDataName: "RequestDatetime")

                            @Html.CtrlInput(divSize: "d-none", id: "txtIsActive", type: "type=\"number\"", format: "", label: "Activo", placeHolder: "", columnDataName: "IsActive")

                            @Html.CtrlInput(divSize: "d-none", id: "txtLatitude", type: "type=\"number\"", format: "", label: "User Location Latitude", placeHolder: "", columnDataName: "Latitude")
                            @Html.CtrlInput(divSize: "d-none", id: "txtLongitude", type: "type=\"number\"", format: "", label: "User Location Longitude", placeHolder: "", columnDataName: "Longitude")

                            <!-- Modals trigger buttons -->
                            <div class="single-input">
                                <div class="d-inline-block">
                                    <button type="button" class="ho-button ho-button-dark" data-toggle="modal" data-target="#mapModal">
                                        <span>
                                            Ver ubicación
                                        </span>
                                    </button>
                                </div>

                                @Html.CtrlButton(viewName: "vProductRequest", id: "btnCreate", style: "ho-button ho-button-dark", label: "Crear", onClickFunction: "Create")


                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Map modal -->
<div class="modal fade" id="mapModal" tabindex="-1" role="dialog" aria-labelledby="Coordinates selector" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">Ver dirección</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="container">
                    <div id="mapSelector"></div>
                    <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCQSrrB_vyRukFOkul1HqvmyJ0GpPE1Agk&callback=initMap"></script>
                </div>
            </div>
            <div class="modal-footer d-inline-block">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <small id="lblChosenCoordinates"></small>
            </div>
        </div>
    </div>
</div>